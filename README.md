<h1>salfaContacts</h1>

Restful приложениe для управления контактами клиентов.
Текущие ограничения:
- в данном приложении одному клиенту сопоставлен один контакт (соответствует техническому заданию).
-  чувствительные данные (ключи и пароли) находятся в .env файле в составе git репозитория. Для безопасного использования следует поменять эти данные на другие.
- отсутствует пагинация списков пользователей, клиентов и контактов (соответствует техническому заданию).
- база данных управляется hibernate (отсутствуют миграции Liquibase)

Используемые технологии:
- Spring Boot 4.0.2 – основной фреймворк
- Spring Security – аутентификация и авторизация
- JWT – токены доступа
- Spring Data JPA / Hibernate – работа с базой данных
- PostgreSQL – СУБД
- OpenAPI (Swagger) – документация API
- Docker / Docker Compose – контейнеризация
- JUnit 5, Mockito – модульные тесты (покрывают сервисы и контроллеры)
- jakarta.validation.constraints – в dto для валидации входных данных

Предварительные требования
•	Java 17 или выше (для локального запуска)
•	Maven (для локальной сборки)
•	Docker и Docker Compose (для запуска в контейнерах)
•	PostgreSQL (если запускаете без Docker)

Самый простой способ запустить приложение – использовать Docker Compose.
1. Клонируйте репозиторий:
   git clone <url-репозитория>
   cd salfaContacts
2. Настройте переменные окружения:
   Отредактируйте .env файл при необходимости.
3. Запустите контейнеры:
   docker-compose up -d
   - Приложение будет доступно по адресу: http://localhost:8080 
            например http://localhost:8080/login для авторизации в системе.
   - Swagger Api:  http://localhost:8080/swagger-ui/index.html
   Для доступа к защищённым ресурсам необходимо предварительно получить JWT токен 
        и добавить его в заголовок Authorization (в swagger через кнопку Authorize).
4. Остановка
   docker-compose down
   Если нужно также удалить том с данными БД:
   docker-compose down -v
   
Запуск локально (без Docker)
1. Убедитесь, что PostgreSQL запущен
   Создайте базу данных, например salfaContacts. Настройки подключения укажете в .env. 
   Либо при создании базы данных используйте настройки из файла .env
2. Настройте .env (если изменились настройки)
3. Запустите приложение в IDE
   
Примечание: При первом запуске, если в базе нет ни одного администратора, 
   автоматически создаётся администратор с логином и паролем из переменных FIRST_ADMIN_LOGIN и 
   FIRST_ADMIN_PASSWORD (по умолчанию FirstAdmin и Password).	

   Аутентификация и роли.
   Роли пользователей:
   •	ADMIN – полный доступ ко всем операциям, включая создание и удаление пользователей/администраторов.
   •	SUPERUSER – может создавать, просматривать, редактировать и удалять клиентов и контакты.
   •	USER – только просмотр клиентов и контактов.		
   
Получение токена
   Для аутентификации используется эндпоинт: POST /login		
   Тело запроса (JSON):
   {
   "login": "FirstAdmin",
   "password": "Password"
   }
   Примечание: Логин должен быть длиной от 5 до 20 символов и содержать только латинские буквы, цифры, 
   точки, подчёркивания и дефисы.
   Пароль должен содержать не менее 8 символов и также должен быть в латинской раскладке.		
В ответ приходит токен:
   {
   "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
   }
Этот токен необходимо передавать во все последующие запросы в заголовке:
   Authorization: Bearer <токен>
		
